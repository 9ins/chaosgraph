/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.3/userguide/java_library_plugin.html
 */
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'maven'
apply plugin: 'signing'

group = "io.github.9ins"
archivesBaseName = "chaosgraph"
version = "0.9.0"
sourceCompatibility = 1.8
compileJava.options.encoding = 'utf-8'

task javadocJar(type: Jar) {
    classifier = 'javadoc'
    from javadoc
}

task sourcesJar(type: Jar) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

artifacts {
    archives javadocJar, sourcesJar
}

signing {
    sign configurations.archives
}

uploadArchives {
  repositories {
    mavenDeployer {
      beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }

      repository(url: "https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/") {
        authentication(userName: ossrhUsername, password: ossrhPassword)
      }

      snapshotRepository(url: "https://s01.oss.sonatype.org/content/repositories/snapshots/") {
        authentication(userName: ossrhUsername, password: ossrhPassword)
      }

      pom.project {
        name 'chaosgraph'
        packaging 'jar'
        description 'ChaosGraph is able to make your Chart App more graceful and easily'
        url 'https://github.com/9ins/chaosgraph'
        scm {
          connection 'scm:svn:https://github.com/9ins/chaosgraph.git'
          developerConnection 'scm:svn:https://github.com/9ins/chaosgraph.git'
          url 'https://github.com/9ins/chaosgraph.git'
        }

        licenses {
          license {
            name 'The Apache License, Version 2.0'
            url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
          }
        }

        developers {
          developer {
            id 'chaos930'
            name 'Kooin-Shin '
            email 'chaos930@gmail.com'
          }
        }
      }
    }
  }
}

jar {
    manifest {
        attributes 'Implementation-Title': 'chaosgraph',
                   'Implementation-Version': version
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'utf-8'
}

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter() 
    mavenLocal() 
    mavenCentral() 
	  //flatDir {
		//  dirs 'libs'
	  //}
}

dependencies {
    // This dependency is exported to consumers, that is to say found on their compile classpath.
    //api 'org.apache.commons:commons-math3:3.6.1'

    // This dependency is used internally, and not exposed to consumers on their own compile classpath.
    //implementation 'com.google.guava:guava:28.2-jre'

    // Use JUnit test framework
    testImplementation 'junit:junit:4.12'
    
	  // https://mvnrepository.com/artifact/javax.media.jai/com.springsource.javax.media.jai.core
	  compile group: 'javax.media.jai', name: 'com.springsource.javax.media.jai.core', version: '1.1.3'
	
	  // https://mvnrepository.com/artifact/javax.media.jai/com.springsource.javax.media.jai.codec
	  compile group: 'javax.media.jai', name: 'com.springsource.javax.media.jai.codec', version: '1.1.3'

	  // https://mvnrepository.com/artifact/org.apache.commons/commons-math3
	  compile group: 'org.apache.commons', name: 'commons-math3', version: '3.6.1'

    // https://mvnrepository.com/artifact/org.eclipse.swt/org.eclipse.swt.win32.win32.x86_64
    implementation group: 'org.eclipse.swt', name: 'org.eclipse.swt.win32.win32.x86_64', version: '4.3'

    // https://mvnrepository.com/artifact/org.eclipse/draw2d
    implementation group: 'org.eclipse', name: 'draw2d', version: '3.2.100-v20070529'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind
    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.12.4'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core
    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.12.4'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations
    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.12.4'

    //compile fileTree(include: ['*.jar'], dir: 'libs')
    //compile files('libs/draw2d-3.10.1.jar')
    //compile files('libs/jackson-annotations-2.11.3.jar');
    //compile files('libs/jackson-core-2.11.3.jar');
    //compile files('libs/jackson-databind-2.11.3.jar');
    //implementation fileTree(dir: 'libs', include: ['*.jar'])
}


jar {
	doFirst {
	    from {
	        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
	    }
    }
    exclude 'META-INF/*.RSA', 'META-INF/*.SF','META-INF/*.DSA'
}
